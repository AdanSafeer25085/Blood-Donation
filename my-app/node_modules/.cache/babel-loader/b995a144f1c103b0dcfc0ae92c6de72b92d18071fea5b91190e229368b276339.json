{"ast":null,"code":"import _objectSpread from\"C:/Users/Rajpoot/Desktop/untitled folder/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState,useEffect}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function DisplayData(_ref){let{onBack}=_ref;const[data,setData]=useState([]);// Donors data\nconst[loading,setLoading]=useState(true);// Loading status\nconst[error,setError]=useState(null);// Error state\nconst[reviews,setReviews]=useState({});// Reviews mapped to donor IDs\nconst[newReviews,setNewReviews]=useState({});// New review inputs for each donor\n// Fetch donor data and reviews on component mount\nuseEffect(()=>{const fetchData=async()=>{try{const donorResponse=await fetch(\"http://localhost:5000/get-form-data\");if(!donorResponse.ok)throw new Error(\"Failed to fetch donors\");const donors=await donorResponse.json();setData(donors);const reviewsMap={};for(const donor of donors){const reviewResponse=await fetch(\"http://localhost:5000/get-reviews/\".concat(donor.id));if(!reviewResponse.ok)throw new Error(\"Failed to fetch reviews\");const donorReviews=await reviewResponse.json();reviewsMap[donor.id]=donorReviews;}setReviews(reviewsMap);}catch(err){setError(err.message);}finally{setLoading(false);}};fetchData();},[]);const handleReviewChange=(donorId,review)=>{setNewReviews(prev=>_objectSpread(_objectSpread({},prev),{},{[donorId]:review}));};const submitReview=async donorId=>{const review=newReviews[donorId];if(!review)return;try{const response=await fetch(\"http://localhost:5000/submit-review\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({donorId,review})});if(!response.ok)throw new Error(\"Failed to submit review\");setReviews(prev=>_objectSpread(_objectSpread({},prev),{},{[donorId]:[...(prev[donorId]||[]),{review}]}));setNewReviews(prev=>_objectSpread(_objectSpread({},prev),{},{[donorId]:\"\"}));// Clear input\n}catch(err){console.error(\"Error submitting review:\",err);}};if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});if(error)return/*#__PURE__*/_jsxs(\"p\",{children:[\"Error: \",error]});if(!data.length)return/*#__PURE__*/_jsx(\"p\",{children:\"No donors found\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 bg-white rounded-lg shadow-md w-full h-full mx-auto flex flex-col overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-6 text-center\",children:\"List of Donors\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onBack,className:\"mt-6 bg-[rgb(153,27,27)] text-white px-4 py-2 rounded-lg absolute right-0 top-[-30px]\",children:\"Back\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:data.map(donor=>{var _reviews$donor$id;return/*#__PURE__*/_jsxs(\"div\",{className:\"border border-gray-300 rounded-lg p-4 shadow-sm\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"First Name:\"}),\" \",donor.firstName]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Last Name:\"}),\" \",donor.lastName]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Mobile Number:\"}),\" \",donor.mobileNumber]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",donor.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Location:\"}),\" \",donor.location]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Blood Group:\"}),\" \",donor.bloodGroup]}),/*#__PURE__*/_jsx(\"h4\",{className:\"font-bold mt-4\",children:\"Reviews:\"}),(_reviews$donor$id=reviews[donor.id])!==null&&_reviews$donor$id!==void 0&&_reviews$donor$id.length?reviews[donor.id].map((r,index)=>/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-700\",children:r.review},index)):/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"No reviews yet\"}),/*#__PURE__*/_jsx(\"textarea\",{value:newReviews[donor.id]||\"\",onChange:e=>handleReviewChange(donor.id,e.target.value),placeholder:\"Write a review...\",className:\"w-full border mt-2 p-2 rounded\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>submitReview(donor.id),className:\"bg-[rgb(153,27,27)] text-white px-4 py-2 mt-2 rounded-md\",children:\"Submit Review\"})]},donor.id);})})]});}export default DisplayData;","map":{"version":3,"names":["useState","useEffect","jsx","_jsx","jsxs","_jsxs","DisplayData","_ref","onBack","data","setData","loading","setLoading","error","setError","reviews","setReviews","newReviews","setNewReviews","fetchData","donorResponse","fetch","ok","Error","donors","json","reviewsMap","donor","reviewResponse","concat","id","donorReviews","err","message","handleReviewChange","donorId","review","prev","_objectSpread","submitReview","response","method","headers","body","JSON","stringify","console","children","length","className","onClick","map","_reviews$donor$id","firstName","lastName","mobileNumber","email","location","bloodGroup","r","index","value","onChange","e","target","placeholder"],"sources":["C:/Users/Rajpoot/Desktop/untitled folder/my-app/src/Components/Form/getBloodForm.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\n\nfunction DisplayData({ onBack }) {\n  const [data, setData] = useState([]); // Donors data\n  const [loading, setLoading] = useState(true); // Loading status\n  const [error, setError] = useState(null); // Error state\n  const [reviews, setReviews] = useState({}); // Reviews mapped to donor IDs\n  const [newReviews, setNewReviews] = useState({}); // New review inputs for each donor\n\n  // Fetch donor data and reviews on component mount\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const donorResponse = await fetch(\"http://localhost:5000/get-form-data\");\n        if (!donorResponse.ok) throw new Error(\"Failed to fetch donors\");\n        const donors = await donorResponse.json();\n        setData(donors);\n\n        const reviewsMap = {};\n        for (const donor of donors) {\n          const reviewResponse = await fetch(\n            `http://localhost:5000/get-reviews/${donor.id}`\n          );\n          if (!reviewResponse.ok) throw new Error(\"Failed to fetch reviews\");\n          const donorReviews = await reviewResponse.json();\n          reviewsMap[donor.id] = donorReviews;\n        }\n        setReviews(reviewsMap);\n      } catch (err) {\n        setError(err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, []);\n\n  const handleReviewChange = (donorId, review) => {\n    setNewReviews((prev) => ({ ...prev, [donorId]: review }));\n  };\n\n  const submitReview = async (donorId) => {\n    const review = newReviews[donorId];\n    if (!review) return;\n\n    try {\n      const response = await fetch(\"http://localhost:5000/submit-review\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ donorId, review }),\n      });\n\n      if (!response.ok) throw new Error(\"Failed to submit review\");\n\n      setReviews((prev) => ({\n        ...prev,\n        [donorId]: [...(prev[donorId] || []), { review }],\n      }));\n      setNewReviews((prev) => ({ ...prev, [donorId]: \"\" })); // Clear input\n    } catch (err) {\n      console.error(\"Error submitting review:\", err);\n    }\n  };\n\n  if (loading) return <p>Loading...</p>;\n  if (error) return <p>Error: {error}</p>;\n  if (!data.length) return <p>No donors found</p>;\n\n  return (\n    <div className=\"p-6 bg-white rounded-lg shadow-md w-full h-full mx-auto flex flex-col overflow-y-auto\">\n      <div className=\"relative\">\n      <h2 className=\"text-2xl font-bold mb-6 text-center\">List of Donors</h2>\n      <button\n        onClick={onBack}\n        className=\"mt-6 bg-[rgb(153,27,27)] text-white px-4 py-2 rounded-lg absolute right-0 top-[-30px]\"\n      >\n        Back\n      </button>\n      </div>\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {data.map((donor) => (\n          <div\n            key={donor.id}\n            className=\"border border-gray-300 rounded-lg p-4 shadow-sm\"\n          >\n            <p>\n              <strong>First Name:</strong> {donor.firstName}\n            </p>\n            <p>\n              <strong>Last Name:</strong> {donor.lastName}\n            </p>\n            <p>\n              <strong>Mobile Number:</strong> {donor.mobileNumber}\n            </p>\n            <p>\n              <strong>Email:</strong> {donor.email}\n            </p>\n            <p>\n              <strong>Location:</strong> {donor.location}\n            </p>\n            <p>\n              <strong>Blood Group:</strong> {donor.bloodGroup}\n            </p>\n            <h4 className=\"font-bold mt-4\">Reviews:</h4>\n            {reviews[donor.id]?.length ? (\n              reviews[donor.id].map((r, index) => (\n                <p key={index} className=\"text-sm text-gray-700\">\n                  {r.review}\n                </p>\n              ))\n            ) : (\n              <p className=\"text-sm text-gray-500\">No reviews yet</p>\n            )}\n            <textarea\n              value={newReviews[donor.id] || \"\"}\n              onChange={(e) => handleReviewChange(donor.id, e.target.value)}\n              placeholder=\"Write a review...\"\n              className=\"w-full border mt-2 p-2 rounded\"\n            ></textarea>\n            <button\n              onClick={() => submitReview(donor.id)}\n              className=\"bg-[rgb(153,27,27)] text-white px-4 py-2 mt-2 rounded-md\"\n            >\n              Submit Review\n            </button>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default DisplayData;\n"],"mappings":"oIAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE5C,QAAS,CAAAC,WAAWA,CAAAC,IAAA,CAAa,IAAZ,CAAEC,MAAO,CAAC,CAAAD,IAAA,CAC7B,KAAM,CAACE,IAAI,CAAEC,OAAO,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CAAE;AACtC,KAAM,CAACW,OAAO,CAAEC,UAAU,CAAC,CAAGZ,QAAQ,CAAC,IAAI,CAAC,CAAE;AAC9C,KAAM,CAACa,KAAK,CAAEC,QAAQ,CAAC,CAAGd,QAAQ,CAAC,IAAI,CAAC,CAAE;AAC1C,KAAM,CAACe,OAAO,CAAEC,UAAU,CAAC,CAAGhB,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAE;AAC5C,KAAM,CAACiB,UAAU,CAAEC,aAAa,CAAC,CAAGlB,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAE;AAElD;AACAC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAkB,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC5B,GAAI,CACF,KAAM,CAAAC,aAAa,CAAG,KAAM,CAAAC,KAAK,CAAC,qCAAqC,CAAC,CACxE,GAAI,CAACD,aAAa,CAACE,EAAE,CAAE,KAAM,IAAI,CAAAC,KAAK,CAAC,wBAAwB,CAAC,CAChE,KAAM,CAAAC,MAAM,CAAG,KAAM,CAAAJ,aAAa,CAACK,IAAI,CAAC,CAAC,CACzCf,OAAO,CAACc,MAAM,CAAC,CAEf,KAAM,CAAAE,UAAU,CAAG,CAAC,CAAC,CACrB,IAAK,KAAM,CAAAC,KAAK,GAAI,CAAAH,MAAM,CAAE,CAC1B,KAAM,CAAAI,cAAc,CAAG,KAAM,CAAAP,KAAK,sCAAAQ,MAAA,CACKF,KAAK,CAACG,EAAE,CAC/C,CAAC,CACD,GAAI,CAACF,cAAc,CAACN,EAAE,CAAE,KAAM,IAAI,CAAAC,KAAK,CAAC,yBAAyB,CAAC,CAClE,KAAM,CAAAQ,YAAY,CAAG,KAAM,CAAAH,cAAc,CAACH,IAAI,CAAC,CAAC,CAChDC,UAAU,CAACC,KAAK,CAACG,EAAE,CAAC,CAAGC,YAAY,CACrC,CACAf,UAAU,CAACU,UAAU,CAAC,CACxB,CAAE,MAAOM,GAAG,CAAE,CACZlB,QAAQ,CAACkB,GAAG,CAACC,OAAO,CAAC,CACvB,CAAC,OAAS,CACRrB,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAEDO,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAe,kBAAkB,CAAGA,CAACC,OAAO,CAAEC,MAAM,GAAK,CAC9ClB,aAAa,CAAEmB,IAAI,EAAAC,aAAA,CAAAA,aAAA,IAAWD,IAAI,MAAE,CAACF,OAAO,EAAGC,MAAM,EAAG,CAAC,CAC3D,CAAC,CAED,KAAM,CAAAG,YAAY,CAAG,KAAO,CAAAJ,OAAO,EAAK,CACtC,KAAM,CAAAC,MAAM,CAAGnB,UAAU,CAACkB,OAAO,CAAC,CAClC,GAAI,CAACC,MAAM,CAAE,OAEb,GAAI,CACF,KAAM,CAAAI,QAAQ,CAAG,KAAM,CAAAnB,KAAK,CAAC,qCAAqC,CAAE,CAClEoB,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEV,OAAO,CAAEC,MAAO,CAAC,CAC1C,CAAC,CAAC,CAEF,GAAI,CAACI,QAAQ,CAAClB,EAAE,CAAE,KAAM,IAAI,CAAAC,KAAK,CAAC,yBAAyB,CAAC,CAE5DP,UAAU,CAAEqB,IAAI,EAAAC,aAAA,CAAAA,aAAA,IACXD,IAAI,MACP,CAACF,OAAO,EAAG,CAAC,IAAIE,IAAI,CAACF,OAAO,CAAC,EAAI,EAAE,CAAC,CAAE,CAAEC,MAAO,CAAC,CAAC,EACjD,CAAC,CACHlB,aAAa,CAAEmB,IAAI,EAAAC,aAAA,CAAAA,aAAA,IAAWD,IAAI,MAAE,CAACF,OAAO,EAAG,EAAE,EAAG,CAAC,CAAE;AACzD,CAAE,MAAOH,GAAG,CAAE,CACZc,OAAO,CAACjC,KAAK,CAAC,0BAA0B,CAAEmB,GAAG,CAAC,CAChD,CACF,CAAC,CAED,GAAIrB,OAAO,CAAE,mBAAOR,IAAA,MAAA4C,QAAA,CAAG,YAAU,CAAG,CAAC,CACrC,GAAIlC,KAAK,CAAE,mBAAOR,KAAA,MAAA0C,QAAA,EAAG,SAAO,CAAClC,KAAK,EAAI,CAAC,CACvC,GAAI,CAACJ,IAAI,CAACuC,MAAM,CAAE,mBAAO7C,IAAA,MAAA4C,QAAA,CAAG,iBAAe,CAAG,CAAC,CAE/C,mBACE1C,KAAA,QAAK4C,SAAS,CAAC,uFAAuF,CAAAF,QAAA,eACpG1C,KAAA,QAAK4C,SAAS,CAAC,UAAU,CAAAF,QAAA,eACzB5C,IAAA,OAAI8C,SAAS,CAAC,qCAAqC,CAAAF,QAAA,CAAC,gBAAc,CAAI,CAAC,cACvE5C,IAAA,WACE+C,OAAO,CAAE1C,MAAO,CAChByC,SAAS,CAAC,uFAAuF,CAAAF,QAAA,CAClG,MAED,CAAQ,CAAC,EACJ,CAAC,cACN5C,IAAA,QAAK8C,SAAS,CAAC,sDAAsD,CAAAF,QAAA,CAClEtC,IAAI,CAAC0C,GAAG,CAAExB,KAAK,OAAAyB,iBAAA,oBACd/C,KAAA,QAEE4C,SAAS,CAAC,iDAAiD,CAAAF,QAAA,eAE3D1C,KAAA,MAAA0C,QAAA,eACE5C,IAAA,WAAA4C,QAAA,CAAQ,aAAW,CAAQ,CAAC,IAAC,CAACpB,KAAK,CAAC0B,SAAS,EAC5C,CAAC,cACJhD,KAAA,MAAA0C,QAAA,eACE5C,IAAA,WAAA4C,QAAA,CAAQ,YAAU,CAAQ,CAAC,IAAC,CAACpB,KAAK,CAAC2B,QAAQ,EAC1C,CAAC,cACJjD,KAAA,MAAA0C,QAAA,eACE5C,IAAA,WAAA4C,QAAA,CAAQ,gBAAc,CAAQ,CAAC,IAAC,CAACpB,KAAK,CAAC4B,YAAY,EAClD,CAAC,cACJlD,KAAA,MAAA0C,QAAA,eACE5C,IAAA,WAAA4C,QAAA,CAAQ,QAAM,CAAQ,CAAC,IAAC,CAACpB,KAAK,CAAC6B,KAAK,EACnC,CAAC,cACJnD,KAAA,MAAA0C,QAAA,eACE5C,IAAA,WAAA4C,QAAA,CAAQ,WAAS,CAAQ,CAAC,IAAC,CAACpB,KAAK,CAAC8B,QAAQ,EACzC,CAAC,cACJpD,KAAA,MAAA0C,QAAA,eACE5C,IAAA,WAAA4C,QAAA,CAAQ,cAAY,CAAQ,CAAC,IAAC,CAACpB,KAAK,CAAC+B,UAAU,EAC9C,CAAC,cACJvD,IAAA,OAAI8C,SAAS,CAAC,gBAAgB,CAAAF,QAAA,CAAC,UAAQ,CAAI,CAAC,CAC3C,CAAAK,iBAAA,CAAArC,OAAO,CAACY,KAAK,CAACG,EAAE,CAAC,UAAAsB,iBAAA,WAAjBA,iBAAA,CAAmBJ,MAAM,CACxBjC,OAAO,CAACY,KAAK,CAACG,EAAE,CAAC,CAACqB,GAAG,CAAC,CAACQ,CAAC,CAAEC,KAAK,gBAC7BzD,IAAA,MAAe8C,SAAS,CAAC,uBAAuB,CAAAF,QAAA,CAC7CY,CAAC,CAACvB,MAAM,EADHwB,KAEL,CACJ,CAAC,cAEFzD,IAAA,MAAG8C,SAAS,CAAC,uBAAuB,CAAAF,QAAA,CAAC,gBAAc,CAAG,CACvD,cACD5C,IAAA,aACE0D,KAAK,CAAE5C,UAAU,CAACU,KAAK,CAACG,EAAE,CAAC,EAAI,EAAG,CAClCgC,QAAQ,CAAGC,CAAC,EAAK7B,kBAAkB,CAACP,KAAK,CAACG,EAAE,CAAEiC,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAC9DI,WAAW,CAAC,mBAAmB,CAC/BhB,SAAS,CAAC,gCAAgC,CACjC,CAAC,cACZ9C,IAAA,WACE+C,OAAO,CAAEA,CAAA,GAAMX,YAAY,CAACZ,KAAK,CAACG,EAAE,CAAE,CACtCmB,SAAS,CAAC,0DAA0D,CAAAF,QAAA,CACrE,eAED,CAAQ,CAAC,GA1CJpB,KAAK,CAACG,EA2CR,CAAC,EACP,CAAC,CACC,CAAC,EACH,CAAC,CAEV,CAEA,cAAe,CAAAxB,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}